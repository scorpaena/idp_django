<!-- templates/login.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    {% load socialaccount %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="{% static 'css/auth.css' %}">
</head>
<body>
<div class="container">
    {% if user.is_authenticated %}
        <h2>Welcome, {{ user.username }}</h2>
        <form action="{% url 'account_logout' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="logout-btn">Logout</button>
        </form>
    {% else %}
        <h2>Login</h2>
        {% for message in messages %}
            <p class="{% if message.tags == 'error' %}error{% else %}success{% endif %}">{{ message }}</p>
        {% endfor %}
        <form method="post">
            {% csrf_token %}
            {{ login_form.as_p }}
            <button type="submit">Login</button>
            <button type="button" class="social-btn" onclick="window.location.href='{% provider_login_url 'google' %}'">
                Login with Google
            </button>
        </form>
        <button class="toggle" onclick="switchTo(signupUrl)">Don't have an account? Signup here</button>
    {% endif %}
</div>
<script>
    const signupUrl = "{% url 'signup' %}";
</script>
<script src="{% static 'js/auth_toggle.js' %}"></script>
</body>
</html>
